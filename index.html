<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Catch the Yes</title>

<style>
@keyframes pulse {
  0% { transform: translate(-50%,-50%) scale(1); }
  50% { transform: translate(-50%,-50%) scale(1.1); }
  100% { transform: translate(-50%,-50%) scale(1); }
}

  body {
    margin: 0;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #ffe6e6, #ffd9ff);
    overflow: hidden;
    position: relative;
    transition: background 2s ease;
  }

  .wrapper {
    text-align: center;
    z-index: 2;
    position: relative;
  }

  
  #question {
    font-size: 32px;
    margin-bottom: 30px;
    color: #ff3366;
    text-shadow: 1px 1px 3px #fff;
  }

  .buttons {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
    position: relative;
  }

  button {
    padding: 12px 28px;
    font-size: 20px;
    border-radius: 12px;
    border: none;
    cursor: pointer;
    position: relative;
    z-index: 2;
    transition: transform 0.2s, box-shadow 0.2s;
  }

  #yes {
    background: #ff4d4d;
    color: white;
  }
  #yes:hover {
    transform: scale(1.1);
    box-shadow: 0 0 15px #ff4d4d;
  }

  #no {
    background: #ffa64d;
    color: white;
    transition: left 0.25s ease, top 0.25s ease;
    z-index: 1;
  }

  canvas {
    position: fixed;
    top: 0;
    left: 0;
    pointer-events: none;
    z-index: 1;
  }
</style>
</head>

<body>

<canvas id="canvas"></canvas>

<div class="wrapper">
  <div id="question">–°–æ–Ω—è, —Ö–æ—á–µ—à—å –±—ã—Ç—å –º–æ–∏–º –í–∞–ª–µ–Ω—Ç–∏–Ω–æ–º? üåπ</div>

  <div class="buttons">
    <button id="yes">–î–ê</button>
    <span id="placeholder" style="visibility:hidden;"></span>
    <button id="no">–ù–ï–¢</button>
  </div>
</div>

<audio id="violin" src="violin.mp3" autoplay loop></audio>
<audio id="firework" src="firework.mp3" autoplay loop></audio>


<script>
const yesBtn = document.getElementById("yes");
const noBtn = document.getElementById("no");
const placeholder = document.getElementById("placeholder");
const question = document.getElementById("question");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

let moves = 0;
const maxMoves = 3;
let floating = false;
let peekInterval = null;

// resize canvas
function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener("resize", resizeCanvas);
resizeCanvas();

// NO button placeholder
function syncPlaceholder() {
  placeholder.style.width = noBtn.offsetWidth + "px";
  placeholder.style.height = noBtn.offsetHeight + "px";
}
syncPlaceholder();

// NO button movement
function moveToRandom() {
  if (!floating) {
    const rect = noBtn.getBoundingClientRect();
    noBtn.style.position = "fixed";
    noBtn.style.left = rect.left + "px";
    noBtn.style.top = rect.top + "px";
    floating = true;
  }

  const padding = 20;
  const x = Math.random() * (window.innerWidth - noBtn.offsetWidth - padding);
  const y = Math.random() * (window.innerHeight - noBtn.offsetHeight - padding);
  noBtn.style.left = x + "px";
  noBtn.style.top = y + "px";
}

noBtn.addEventListener("mouseenter", () => {
  if (moves < maxMoves) {
    moveToRandom();
    moves++;
  } else {
    hideBehindYesAndPeek();
  }
});

function hideBehindYesAndPeek() {
  const rect = yesBtn.getBoundingClientRect();
  const peekOffset = 10;
  const topPos = rect.top + rect.height / 2 - noBtn.offsetHeight / 2;
  const baseLeft = rect.left + rect.width / 2 - noBtn.offsetWidth / 2 - peekOffset;

  noBtn.style.left = baseLeft + "px";
  noBtn.style.top = topPos + "px";
  noBtn.style.opacity = "1";
  noBtn.style.zIndex = "1";

  if (peekInterval) clearInterval(peekInterval);
  let step = 0;
  peekInterval = setInterval(() => {
    const offset = Math.sin(step) * 5;
    noBtn.style.left = baseLeft + offset + "px";
    step += 0.1;
  }, 30);
}

// Particle systems: fireworks, hearts, confetti
let particles = [];

// Firework particle
function createParticle(x, y, color=null) {
  const colors = ["#ff0040","#ff8000","#ffff00","#00ff80","#00ffff","#0080ff","#8000ff"];
  return {
    x,
    y,
    radius: Math.random()*3+2,
    color: color || colors[Math.floor(Math.random()*colors.length)],
    speed: Math.random()*5+2,
    angle: Math.random()*2*Math.PI,
    alpha:1,
    decay:Math.random()*0.02+0.01,
    type:"firework"
  };
}

// Heart particle
function createHeart(x,y){
  return {
    x,y,
    size: Math.random()*6+4,
    color:"#ff3366",
    alpha:1,
    decay:0.01+Math.random()*0.01,
    type:"heart"
  };
}

// Confetti particle
function createConfetti(){
  return {
    x: Math.random()*canvas.width,
    y: -10,
    w: Math.random()*8+4,
    h: Math.random()*4+2,
    color:["#ff3366","#ff66cc","#ffcc66","#66ffcc"][Math.floor(Math.random()*4)],
    speed: Math.random()*3+2,
    type:"confetti"
  };
}

// Animate all particles
function animateParticles(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  particles = particles.filter(p => p.alpha===undefined || p.alpha>0 || p.y<canvas.height);
  for(let p of particles){
    if(p.type==="firework"){
      p.x += Math.cos(p.angle)*p.speed;
      p.y += Math.sin(p.angle)*p.speed;
      p.alpha -= p.decay;
      ctx.beginPath();
      ctx.arc(p.x,p.y,p.radius,0,2*Math.PI);
      ctx.fillStyle = `rgba(${parseInt(p.color.slice(1,3),16)},${parseInt(p.color.slice(3,5),16)},${parseInt(p.color.slice(5,7),16)},${p.alpha})`;
      ctx.fill();
    } else if(p.type==="heart"){
      p.y -= 1;
      p.alpha -= p.decay;
      ctx.beginPath();
      ctx.moveTo(p.x, p.y);
      ctx.arc(p.x, p.y, p.size, 0, 2*Math.PI);
      ctx.fillStyle = `rgba(255,51,102,${p.alpha})`;
      ctx.fill();
    } else if(p.type==="confetti"){
      p.y += p.speed;
      ctx.fillStyle = p.color;
      ctx.fillRect(p.x,p.y,p.w,p.h);
    }
  }
  requestAnimationFrame(animateParticles);
}

// Firework burst
function fireworkBurst(x,y,count=50){
  for(let i=0;i<count;i++) particles.push(createParticle(x,y));
}

// Multiple fireworks + hearts + confetti
function startCelebration(duration=50000){
  let elapsed = 0;
  const interval = setInterval(()=>{
    for(let i=0;i<4;i++){ // 3 bursts at a time
      const x = Math.random()*canvas.width;
      const y = Math.random()*canvas.height*0.7;
      fireworkBurst(x,y,30+Math.floor(Math.random()*20));
      // hearts
      for(let j=0;j<3;j++) particles.push(createHeart(x+Math.random()*20-10,y+Math.random()*20-10));
      // confetti
      for(let j=0;j<5;j++) particles.push(createConfetti());
    }
    elapsed += 300;
    if(elapsed>=duration) clearInterval(interval);
  },300);
}

// Animate everything
animateParticles();

// YES clicked
yesBtn.addEventListener("click",()=>{
  question.textContent = "–°–£–ü–ï–†!!!! ‚ù§Ô∏è";
  yesBtn.style.display="none";
  noBtn.style.display="none";
  placeholder.style.display="none";
  if(peekInterval) clearInterval(peekInterval);
  document.body.style.background="linear-gradient(135deg,#ffe6e6,#ffccff)";
  startCelebration(50000);

        const firework = document.getElementById("firework");
      firework.volume = 0.5; // adjust volume if needed
      firework.play();
});

noBtn.addEventListener("click",()=>{

  question.textContent = "T–•–º–º‚Ä¶ —Ç–∞–∫–æ–π –æ—Ç–≤–µ—Ç —è –Ω–µ –ø—Ä–∏–Ω–∏–º–∞—é. –ü–æ–ø—Ä–æ–±—É–µ—à—å –µ—â—ë —Ä–∞–∑–æ–∫?";

  yesBtn.style.display="none";
  noBtn.style.display="none";
  placeholder.style.display="none";

  document.body.style.background = "linear-gradient(135deg,#2b2b2b,#000000)";


  /* -------------------
     screen shake
  ------------------- */
  document.body.animate(
    [
      { transform: "translate(0,0)" },
      { transform: "translate(-4px,3px)" },
      { transform: "translate(4px,-3px)" },
      { transform: "translate(-3px,2px)" },
      { transform: "translate(0,0)" }
    ],
    { duration: 80, iterations: 60 }
  );


  /* -------------------
     1000 crying emojis
     (20 every 100ms for 5s)
  ------------------- */
let count = 0;
const totalEmojis = 100;
const duration = 20000; 
const intervalTime = 100; 
const emojisPerInterval = 10; // reduce a bit for smoother performance

const rainInterval = setInterval(() => {
  for(let i=0; i<emojisPerInterval; i++){
    const emoji = document.createElement("div");
    emoji.textContent = "üíîüò¢ü•∫";
    emoji.style.position = "fixed";
    emoji.style.left = Math.random() * 100 + "vw";
    // Randomize starting point above or slightly inside viewport
    emoji.style.top = (-40 + Math.random() * window.innerHeight) + "px";
    emoji.style.fontSize = (20 + Math.random() * 18) + "px";
    emoji.style.pointerEvents = "none";
    emoji.style.transition = "transform 15s linear, opacity 15s linear";

    document.body.appendChild(emoji);

    // Force reflow
    emoji.getBoundingClientRect();
    emoji.style.transform = `translateY(${window.innerHeight + 40}px)`; // fall to bottom
    emoji.style.opacity = "0";

    setTimeout(() => emoji.remove(), 15500);
  }

  count += emojisPerInterval;
  if(count >= totalEmojis){
    clearInterval(rainInterval);
  }

}, intervalTime);

const violin = document.getElementById("violin");
violin.volume = 0.5; // adjust volume if needed
violin.play();

  /* -------------------
     giant YES after 5s
  ------------------- */
setTimeout(()=>{

    const bigYes = document.createElement("button");
    bigYes.textContent="–î–ê ‚ù§Ô∏è";
    bigYes.style.position="fixed";
    bigYes.style.left="50%";
    bigYes.style.top="60%";
    bigYes.style.transform="translate(-50%,-50%)";
    bigYes.style.fontSize="44px";
    bigYes.style.padding="30px 80px";
    bigYes.style.borderRadius="22px";
    bigYes.style.background="#ff4d4d";
    bigYes.style.color="white";
    bigYes.style.boxShadow="0 0 40px #ff4d4d";
    bigYes.style.zIndex="10";
    bigYes.style.animation="pulse 1s infinite";

    document.body.appendChild(bigYes);

    bigYes.onclick = () => {
      question.textContent = "–•–∞-—Ö–∞ üòÑ –Ø –∑–Ω–∞–ª, —á—Ç–æ —Ç—ã —Å–∫–∞–∂–µ—à—å –î–ê. –¢—ã –æ—á–µ–Ω—å —Å–º–µ—à–Ω–∞—è, –°–æ–Ω—è!";
      document.body.style.background="linear-gradient(135deg,#ffe6e6,#ffccff)";
      bigYes.remove();

      // stop crying emoji rain
      clearInterval(rainInterval);

    violin.pause();
    violin.currentTime = 0; // reset to start

      startCelebration(50000);

      const firework = document.getElementById("firework");
      firework.volume = 0.5; // adjust volume if needed
      firework.play();
    };

  }, 10000); // 10 seconds
});

</script>

</body>
</html>
